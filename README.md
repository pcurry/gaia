## Intro ##
overall purpose: parsing ESA Gaia data into 3D sector maps for sci-fi purposes

## Required libraries / extensions: ##
- AstroPy
- SciPy
- NumPy
- Matplotlib
- Pandas

## File: Iota_Pegasi_Sector.py ##

current functionality:
- prototype of sector maps that will be mass-generated by this project

## File: not_in_Gaia_DR3.csv ##

contains 142 stars formatted for ingest into panda dataframe by Gaia_Query.py

specifically: stars with Bayer and/or Flamsteed Designations but no matching entries in DR3 (based on queries made in SIMBAD and cross-checking to remove cases where binary systems had separate entries in Gaia DR3 and/or DR2)

mostly these are stars which are too bright for Gaia / saturated the detector, while some (~40) appear in DR1 and/or DR2 but not DR3

minor exception: Procyon B - dim white dwarf which was not in any Gaia dataset (presumably due to proximity to the bright star Procyon A)

includes parallax, gal-lon, gal-lat, parallax and spectral type from SIMBAD

minor exception: Beta Phoenicis - used parallax value of 17.63 mas instead of 0.12 mas (which is the value in SIMBAD)

per wikipedia: "The distance to Beta Phoenicis is poorly known. The original reduction of the Hipparcos satellite's data yielded a parallax value of 16 milliarcseconds, yet its standard error was larger than the parallax value itself. An individual note in the Hipparcos catalogue provided a more likely parallax of 17.63±2.09 mas, corresponding to a distance of 185±22 light-years, consistent with the expected distance implied by the absolute visual magnitude of a G8 giant. The new reduction of the Hipparcos data gave 0.12 ± 14.62 milliarcseconds, still unusable. The General Catalogue of Trigonometric Parallaxes, an older catalogue of ground-based parallaxes, lists the parallax as 20 ± 16 milliarcseconds, corresponding to about 200 light-years (61 pc)"

(n.b. a parallax of 0.12 mas would be equivalent to a distance of 27,180 light years, which seems unreasonable for a star bright enough to saturate Gaia's detectors)

## File: Gaia_Query.py ##

current functionality:
- query Gaia dataset by pre-set parallax cut-off for stars within set distance of Sol - gets approx 5K stars with Gaia DR3 designation, gal-lon, gal-lat, parallax and G-band magnitude (as measured by Gaia space telescope)
- ingests these into a Panda dataframe
- calculates distance from Sol in parsecs (from Gaia-measured parallax), adds as column to Panda dataframe
- calculates adjusted mag for stars (approx. equivalent to Absolute Magnitude) from G-band for Gaia stars, adds as column to Panda dataframe
- query SIMBAD to cross-match Gaia designations with Star Names and Spectral Classifications, add as columns to Panda data frame
- NOTE: this step is currently a bottleneck and takes several tens of minutes to run and includes warning message from SIMBAD that data has not be found... but the script will continue to run and get matching data for almost all of the stars pulled from Gaia
- calculates x,y,z coordinates (with Sol as the origin, X-axis as Coreward/Rimward, Y-axis as Spinward/Trailing, Z-axis as Galactic North/South) in parsecs from Gaia-measured G-lon and G-lat, adds as column to Panda dataframe
- adds 140+ stars from not_in_Gaia_DR3.csv
- exports panda datadframe as gaia_query_results.csv

punch list / road map for continued development:
- continue to vet the data in not_in_Gaia_DR3.csv (e.g. missing spectral types, absolute magnitudes)
- see if can reduce bottleneck during SIMBAD query step
- include special handling where no G-Mag value is present from Gaia dataset
- include better handling of when SIMBAD has no cross-matched entries
- include better handling of when SIMBAD has cross-match but no spectral type
- convert SIMBAD IDs to more human-friendly text
- prompt user to define distance from Sol to be sampled from Gaia

## File: gaia_query_results.csv ##
output file from gaia_query_results.csv
- column 1 - designation from Gaia DR3 (or from DR2 or DR1 if not in DR3), empty if not in any Gaia DR
- column 2 - l - galactic longitude - in degrees (as measured by Gaia in most cases, otherwise from SIMBAD)
- column 3 - b - galactic latitude - in degrees (as measured by Gaia in most cases, otherwise from SIMBAD)
- column 4 - parallax - in milliarcseconds (mas) (as measured by Gaia in most cases, otherwise from SIMBAD)
- column 5 - phot_g_mean_mag (from Gaia)
- column 6 - distance - in parsecs from Sol
- column 7 - adjusted_mag - value after the equivalent of the conversion from Apparent Magnitude to Absolute Magnitude has been doen to the G_band measurement by Gaia (or the Absolute Magnitude value of non-Gaia stars from the csv)
- column 8 - SIMBAD ID - main id in SIMBAD
- column 9 - Spectral Type - spectral classification in SIMBAD (if any)
- column 10 - X - cartesian coordinates in units of parsecs where positive X is coreward from Sol and negative X is rimward
- column 11 - Y - cartesian coordinates in units of parsecs where positive Y is spinward from Sol and negative Y is trailing (in context of the direction of galactic disk rotation)
- column 12 - Z - cartesian coordinates in units of parsecs where positive Z is "galactic north" and negative Z is "galactic south"
 
## Separate script to be written ##

- ingests gaia_query_results.csv file produced by Gaia_Query.py
- parses into 10 parsec x 10 parsec x 10 parsec cubes
- creates 3D plots as sector maps (Iota_Pegasi_Sector.py being a prototype)
- color of markers to be keyed to spectral type (OBAFGKM) of star
- size of markers to be keyed to the brightness of the star
- markers to be labeled by star name
- output: labeled 3D sector maps, labeled 2D sector maps, gazetteer table of stars in the sector (formated in Textile)