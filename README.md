## Intro ##
overall purpose: parsing ESA Gaia data into 3D sector maps for sci-fi purposes

## Required libraries / extensions: ##
- AstroPy
- SciPy
- NumPy
- Matplotlib
- Pandas

## File: Iota_Pegasi_Sector.py ##

current functionality:
- prototype of sector maps that will be mass-generated by this project

## File: not_in_any_Gaia_DR.csv ##

contains 105 stars formatted for ingest into panda dataframe by Gaia_Query.py

specifically: stars with Bayer and/or Flamsteed Designations but no matching entries in DR1, DR2 or DR3 (based on queries made in SIMBAD and cross-checking to remove cases where binary systems had separate entries in Gaia DR3 and/or DR2)

mostly these are stars which are too bright for Gaia / saturated the detector

minor exception: Procyon B - dim white dwarf which was not in any Gaia dataset (presumably due to proximity to the bright star Procyon A)

minor exception: Beta Phoenicis - used parallax value of 17.63 mas instead of 0.12 mas (which is the value in SIMBAD)

per wikipedia: "The distance to Beta Phoenicis is poorly known. The original reduction of the Hipparcos satellite's data yielded a parallax value of 16 milliarcseconds, yet its standard error was larger than the parallax value itself. An individual note in the Hipparcos catalogue provided a more likely parallax of 17.63±2.09 mas, corresponding to a distance of 185±22 light-years, consistent with the expected distance implied by the absolute visual magnitude of a G8 giant. The new reduction of the Hipparcos data gave 0.12 ± 14.62 milliarcseconds, still unusable. The General Catalogue of Trigonometric Parallaxes, an older catalogue of ground-based parallaxes, lists the parallax as 20 ± 16 milliarcseconds, corresponding to about 200 light-years (61 pc)"

(n.b. a parallax of 0.12 mas would be equivalent to a distance of 27,180 light years, which seems unreasonable for a star bright enough to saturate Gaia's detectors)

in cases where no stand-alone parallax was available in SIMBAD for members of a binary or multiple system, the parallax from parent entry (e.g. using parallax from STARNAME for STARNAME A and STARNAME B) or the parallax from a sibling entry (e.g. using parallax from STARNAME A for STARNAME B) are used

- pros: stars which are physically related will end up being plotted close to each other (but not at the exact same spot, since l and b values are different)

- cons: it is not literally true that the A and B components of a binary star system are exactly the same distance from Sol and have exactly the same parallax

in the cases of stars flagged as spectroscopic binaries in SIMBAD, gal-lon, gal-lat and parallax values were duplicated for both the A and B stars 

- pros: stars which are physically distinct have separate entries in the panda dataframe

- cons: these stars will be plotted in the same location unless/until further tweak is made to Gaia_Query_py

file will be revised if/when further missing-from-Gaia stars are identified and any refinements determined for galactic longitude, galactic latitude and parallax values of the initial 105 stars

## File: Gaia_Query.py ##

current functionality:
- query Gaia dataset by pre-set parallax cut-off for stars within set distance of Sol - get approx 5K stars with Gaia DR3 designation, gal-lon, gal-lat, parallax and G-band magnitude (as measured by Gaia space telescope)
- ingests into a Panda dataframe
- adds 105 stars which do not appear in any current Gaia data release (mostly due to brightness / detector saturation)
- calculates distance from Sol in parsecs (from Gaia-measured parallax), adds as column to Panda dataframe
- calculates adjust G-mag for stars (e.g. conceptually equivalent to Absolute Magnitude but only in the G-band, useful as a proxy for overall stellar brightness), adds as column to Panda dataframe
- calculates x,y,z coordinates (with Sol as the origin, X-axis as Coreward/Rimward, Y-axis as Spinward/Trailing, Z-axis as Galactic North/South) in parsecs from Gaia-measured G-lon and G-lat, adds as column to Panda dataframe
- inserts Sol as special case (e.g. also a star too bright to be detected by Gaia, and by definition has no parallax)
- prints panda dataframe
- exports panda datadframe as gaia_query_results.csv

punch list / road map for continued development:
- update not_in_any_Gaia_DR.csv file to include actual G-mag values and not placeholder values
- ingest .csv file of stars which appeared in Gaia DR1 and/or DR2 but not in DR3 (including gal-lat, gal-lon, parallax, G-Mag)
- include special handling where no G-Mag value is present from Gaia dataset
- query SIMBAD to cross-match Gaia designations with Star Names and Spectral Classifications, add as columns to Panda data frame
- include handling of when SIMBAD has no cross-matched entries
- include handling of when SIMBAD has cross-match but no spectral type
- convert SIMBAD rendering of Bayer and Flamsteed designations to more human-friendly text
- prompt user to define distance from Sol to be sampled from Gaia

## File: gaia_query_results.csv ##
output file from gaia_query_results.csv
- column 1 - designation - Gaia DR3 (if any) or name of star not in any Gaia data release
- column 2 - l - galactic longitude - in degrees (as measured by Gaia in most cases)
- column 3 - b - galactic latitude - in degrees (as measured by Gaia in most cases)
- column 4 - parallax - in milliarcseconds (mas) (as measured by Gaia in most cases)
- column 5 - phot_g_mean_mag (from Gaia) or 100.00 as placeholder
- column 5 - distance - in parsecs from Sol
- column 6 - X - cartesian coordinates in units of parsecs where positive X is coreward from Sol and negative X is rimward
- column 7 - Y - cartesian coordinates in units of parsecs where positive Y is spinward from Sol and negative Y is trailing (in context of the direction of galactic disk rotation)
- column 8 - Z - cartesian coordinates in units of parsecs where positive Z is "galactic north" and negative Z is "galactic south"
 
## Separate script to be written ##

- ingests gaia_query_results.csv file produced by Gaia_Query.py
- parses into 10 parsec x 10 parsec x 10 parsec cubes
- creates 3D plots as sector maps (Iota_Pegasi_Sector.py being a prototype)
- color of markers to be keyed to spectral type (OBAFGKM) of star
- size of markers to be keyed to the brightness of the star
- markers to be labeled by star name
- output: labeled 3D sector maps, labeled 2D sector maps, gazetteer table of stars in the sector (formated in Textile)